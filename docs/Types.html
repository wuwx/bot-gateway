<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>类型定义 | 小恶魔机器人网关（LDBG）</title>
    <meta name="description" content="用同一套代码服务多个平台的机器人">
    
    
    <link rel="preload" href="/bot-gateway/assets/css/0.styles.4687edb2.css" as="style"><link rel="preload" href="/bot-gateway/assets/js/app.900ac474.js" as="script"><link rel="preload" href="/bot-gateway/assets/js/11.e05dbfe7.js" as="script"><link rel="prefetch" href="/bot-gateway/assets/js/9.dd3a7cc7.js"><link rel="prefetch" href="/bot-gateway/assets/js/2.90a804d4.js"><link rel="prefetch" href="/bot-gateway/assets/js/3.1279c11a.js"><link rel="prefetch" href="/bot-gateway/assets/js/4.719dc71a.js"><link rel="prefetch" href="/bot-gateway/assets/js/5.0c78257c.js"><link rel="prefetch" href="/bot-gateway/assets/js/6.60bce6ec.js"><link rel="prefetch" href="/bot-gateway/assets/js/7.af2f01a0.js"><link rel="prefetch" href="/bot-gateway/assets/js/8.2228df14.js"><link rel="prefetch" href="/bot-gateway/assets/js/10.14637feb.js"><link rel="prefetch" href="/bot-gateway/assets/js/12.8c52734f.js"><link rel="prefetch" href="/bot-gateway/assets/js/13.ce40051d.js"><link rel="prefetch" href="/bot-gateway/assets/js/14.2f50af7c.js"><link rel="prefetch" href="/bot-gateway/assets/js/15.4dc43465.js"><link rel="prefetch" href="/bot-gateway/assets/js/16.10919c3c.js"><link rel="prefetch" href="/bot-gateway/assets/js/17.2d88c6fe.js"><link rel="prefetch" href="/bot-gateway/assets/js/18.e5dee16c.js"><link rel="prefetch" href="/bot-gateway/assets/js/19.680eefac.js">
    <link rel="stylesheet" href="/bot-gateway/assets/css/0.styles.4687edb2.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/bot-gateway/" class="home-link router-link-active"><!----> <span class="site-name">小恶魔机器人网关（LDBG）</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">选择语言</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/bot-gateway/docs/Types.html" class="nav-link router-link-exact-active router-link-active">简体中文</a></li><li class="dropdown-item"><!----> <a href="/bot-gateway/en/docs/Types.html" class="nav-link">English</a></li></ul></div></div> <a href="https://github.com/projectriri/bot-gateway" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">选择语言</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/bot-gateway/docs/Types.html" class="nav-link router-link-exact-active router-link-active">简体中文</a></li><li class="dropdown-item"><!----> <a href="/bot-gateway/en/docs/Types.html" class="nav-link">English</a></li></ul></div></div> <a href="https://github.com/projectriri/bot-gateway" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/bot-gateway/ChangeLog.html" class="sidebar-link">版本历史</a></li><li><a href="/bot-gateway/docs/" class="sidebar-link">使用教程</a></li><li><a href="/bot-gateway/docs/Concept.html" class="sidebar-link">核心概念</a></li><li><a href="/bot-gateway/docs/Types.html" class="active sidebar-link">类型定义</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/bot-gateway/docs/Types.html#common" class="sidebar-link">Common</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/bot-gateway/docs/Types.html#httprequest" class="sidebar-link">HTTPRequest</a></li></ul></li><li class="sidebar-sub-header"><a href="/bot-gateway/docs/Types.html#cmd" class="sidebar-link">CMD</a></li><li class="sidebar-sub-header"><a href="/bot-gateway/docs/Types.html#ubm-api" class="sidebar-link">UBM-API</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/bot-gateway/docs/Types.html#ubm" class="sidebar-link">UBM</a></li><li class="sidebar-sub-header"><a href="/bot-gateway/docs/Types.html#message" class="sidebar-link">Message</a></li><li class="sidebar-sub-header"><a href="/bot-gateway/docs/Types.html#cid" class="sidebar-link">CID</a></li><li class="sidebar-sub-header"><a href="/bot-gateway/docs/Types.html#chat" class="sidebar-link">Chat</a></li><li class="sidebar-sub-header"><a href="/bot-gateway/docs/Types.html#uid" class="sidebar-link">UID</a></li><li class="sidebar-sub-header"><a href="/bot-gateway/docs/Types.html#user" class="sidebar-link">User</a></li><li class="sidebar-sub-header"><a href="/bot-gateway/docs/Types.html#richtextelement" class="sidebar-link">RichTextElement</a></li><li class="sidebar-sub-header"><a href="/bot-gateway/docs/Types.html#at" class="sidebar-link">At</a></li><li class="sidebar-sub-header"><a href="/bot-gateway/docs/Types.html#image" class="sidebar-link">Image</a></li><li class="sidebar-sub-header"><a href="/bot-gateway/docs/Types.html#sticker" class="sidebar-link">Sticker</a></li><li class="sidebar-sub-header"><a href="/bot-gateway/docs/Types.html#voice" class="sidebar-link">Voice</a></li><li class="sidebar-sub-header"><a href="/bot-gateway/docs/Types.html#location" class="sidebar-link">Location</a></li></ul></li></ul></li><li><a href="/bot-gateway/docs/Plugins.html" class="sidebar-link">插件文档</a></li><li><a href="/bot-gateway/docs/Formats.html" class="sidebar-link">格式速查</a></li><li><a href="/bot-gateway/docs/Other.html" class="sidebar-link">其他</a></li></ul> </div> <div class="page"> <div class="content"><h1 id="类型定义"><a href="#类型定义" aria-hidden="true" class="header-anchor">#</a> 类型定义</h1> <p>本页上定义了一些类型，可能会出现在<a href="/bot-gateway/docs/Concept.html#包">包</a>的体中。</p> <h2 id="common"><a href="#common" aria-hidden="true" class="header-anchor">#</a> Common</h2> <p>通用协议类型。</p> <h3 id="httprequest"><a href="#httprequest" aria-hidden="true" class="header-anchor">#</a> HTTPRequest</h3> <table><thead><tr><th>字段名</th> <th>数据类型</th> <th>说明</th></tr></thead> <tbody><tr><td>method</td> <td>string</td> <td>请求方法：&quot;GET&quot;，&quot;POST&quot; 等</td></tr> <tr><td>url</td> <td>string</td> <td>请求地址</td></tr> <tr><td>header</td> <td>{ [key: string]: string[] }</td> <td>HTTP Headers</td></tr> <tr><td>body</td> <td>byte[]</td> <td>HTTP Body</td></tr></tbody></table> <h2 id="cmd"><a href="#cmd" aria-hidden="true" class="header-anchor">#</a> CMD</h2> <p>解析后的命令。下表中前五个字段都是可选字段，是否存在取决于插件的<a href="/bot-gateway/docs/Plugins.html#commander">配置</a>。</p> <table><thead><tr><th>字段名</th> <th>数据类型</th> <th>说明</th></tr></thead> <tbody><tr><td>cmd</td> <td><a href="#richtextelement">RichTextElement</a>[]</td> <td>命令：由一组图文消息段组成</td></tr> <tr><td>cmd_str</td> <td>string</td> <td>命令：纯字符串，去除了其他媒体（如图片、At 等）以后的命令</td></tr> <tr><td>args</td> <td><a href="#richtextelement">RichTextElement</a>[][]</td> <td>命令参数：有多个命令参数，每个命令参数由一组图文消息段组成</td></tr> <tr><td>args_txt</td> <td>string[]</td> <td>命令参数：多个命令参数，每个命令参数都是去除了其他媒体（如图片、At 等）以后的纯字符串</td></tr> <tr><td>args_str</td> <td>string</td> <td>命令参数字符串：由 <em>args_txt</em> 以空格分割组成个一个字符串</td></tr> <tr><td>cmd_prefix</td> <td>string</td> <td>命令前缀</td></tr> <tr><td>message</td> <td><a href="#message">Message</a></td> <td>命令对应的消息</td></tr></tbody></table> <h2 id="ubm-api"><a href="#ubm-api" aria-hidden="true" class="header-anchor">#</a> UBM-API</h2> <p>通用机器人消息 API。</p> <h3 id="ubm"><a href="#ubm" aria-hidden="true" class="header-anchor">#</a> UBM</h3> <p>通用机器人消息。</p> <table><thead><tr><th>字段名</th> <th>数据类型</th> <th>说明</th></tr></thead> <tbody><tr><td>type</td> <td>string</td> <td>消息类型</td></tr> <tr><td>date</td> <td>int64</td> <td>UNIX 时间戳</td></tr> <tr><td>message</td> <td><a href="#message">Message</a></td> <td>聊天消息（消息类型是 message 时需要）</td></tr> <tr><td>notice</td> <td><a href="#notice">Notice</a></td> <td>系统消息：如加群通知等（消息类型是 notice 时需要，仅用于收到的消息）</td></tr> <tr><td>response</td> <td><a href="#response">Response</a></td> <td>响应消息：发出 Message 时的发送结果，或发出 Action 时的响应数据（消息类型是 response 时需要，仅用于收到的消息）</td></tr> <tr><td>action</td> <td><a href="#action">Action</a></td> <td>操作消息：退群等非聊天请求（消息类型是 action 时需要，仅用于发出的消息）</td></tr> <tr><td>self</td> <td><a href="#user">User</a></td> <td>自己的用户（仅用于收到的消息）</td></tr></tbody></table> <h3 id="message"><a href="#message" aria-hidden="true" class="header-anchor">#</a> Message</h3> <p>聊天消息。</p> <table><thead><tr><th>字段名</th> <th>数据类型</th> <th>说明</th></tr></thead> <tbody><tr><td>id</td> <td>string</td> <td>消息 ID，只在当前会话中唯一（仅用于收到的消息）</td></tr> <tr><td>from</td> <td><a href="#user">User</a></td> <td>消息来自的用户（仅用于收到的消息）</td></tr> <tr><td>chat</td> <td><a href="#chat">Chat</a></td> <td>会话（仅用于收到的消息）</td></tr> <tr><td>cid</td> <td><a href="#cid">CID</a></td> <td>会话 CID（仅用于发出的消息）</td></tr> <tr><td>is_message_to_me</td> <td>bool</td> <td>是否 at 或回复我（仅用于收到的消息）</td></tr> <tr><td>reply_id</td> <td>string</td> <td>回复的消息 ID</td></tr> <tr><td>edit_id</td> <td>string</td> <td>编辑的消息 ID</td></tr> <tr><td>delete_id</td> <td>string</td> <td>撤回的消息 ID</td></tr> <tr><td>type</td> <td>string</td> <td>消息类型</td></tr> <tr><td>rich_text</td> <td><a href="#richtextelement">RichTextElement</a>[]</td> <td>图文（消息类型是 rich_text 时需要）</td></tr> <tr><td>sticker</td> <td><a href="#sticker">Sticker</a></td> <td>贴纸（消息类型是 sticker 时需要）</td></tr> <tr><td>voice</td> <td><a href="#voice">Voice</a></td> <td>语音（消息类型是 voice 时需要）</td></tr> <tr><td>location</td> <td><a href="#location">Location</a></td> <td>位置（消息类型是 location 时需要）</td></tr></tbody></table> <h3 id="cid"><a href="#cid" aria-hidden="true" class="header-anchor">#</a> CID</h3> <p>CID 标识一个会话 ID。任何两个不同会话的 CID 都不相同。</p> <table><thead><tr><th>字段名</th> <th>数据类型</th> <th>说明</th></tr></thead> <tbody><tr><td>messenger</td> <td>string</td> <td>平台，实际为插件配置中的适配器名</td></tr> <tr><td>chat_id</td> <td>string</td> <td>平台中的会话 ID</td></tr> <tr><td>chat_type</td> <td>string</td> <td>平台的会话类型</td></tr></tbody></table> <h3 id="chat"><a href="#chat" aria-hidden="true" class="header-anchor">#</a> Chat</h3> <p>会话。</p> <table><thead><tr><th>字段名</th> <th>数据类型</th> <th>说明</th></tr></thead> <tbody><tr><td>cid</td> <td><a href="#cid">CID</a></td> <td>会话 CID</td></tr> <tr><td>title</td> <td>string</td> <td>会话名（用户昵称或群名）</td></tr> <tr><td>description</td> <td>string</td> <td>会话描述</td></tr></tbody></table> <h3 id="uid"><a href="#uid" aria-hidden="true" class="header-anchor">#</a> UID</h3> <p>UID 标识一个用户 ID。</p> <table><thead><tr><th>字段名</th> <th>数据类型</th> <th>说明</th></tr></thead> <tbody><tr><td>messenger</td> <td>string</td> <td>平台，实际为插件配置中的适配器名</td></tr> <tr><td>id</td> <td>string</td> <td>平台中的用户 ID</td></tr> <tr><td>username</td> <td>string</td> <td>用户名（用于在文本中@一个用户的全平台唯一用户名，有些平台可能没有）</td></tr></tbody></table> <h3 id="user"><a href="#user" aria-hidden="true" class="header-anchor">#</a> User</h3> <p>用户。</p> <table><thead><tr><th>字段名</th> <th>数据类型</th> <th>说明</th></tr></thead> <tbody><tr><td>display_name</td> <td>string</td> <td>显示名，取决于平台和会话</td></tr> <tr><td>first_name</td> <td>string</td> <td>名字</td></tr> <tr><td>last_name</td> <td>string</td> <td>姓（有些平台可能没有）</td></tr> <tr><td>uid</td> <td><a href="#uid">UID</a></td> <td>用户 UID</td></tr> <tr><td>private_chat</td> <td><a href="#cid">CID</a></td> <td>私聊该用户的会话 CID</td></tr></tbody></table> <h3 id="richtextelement"><a href="#richtextelement" aria-hidden="true" class="header-anchor">#</a> RichTextElement</h3> <p>图文消息段。</p> <table><thead><tr><th>字段名</th> <th>数据类型</th> <th>说明</th></tr></thead> <tbody><tr><td>type</td> <td>string</td> <td>类型</td></tr> <tr><td>text</td> <td>string</td> <td>文本（消息类型是 text 时需要）</td></tr> <tr><td>at</td> <td><a href="#at">At</a></td> <td>At（消息类型是 at 时需要）</td></tr> <tr><td>image</td> <td><a href="#image">Image</a></td> <td>图片（消息类型是 image 时需要）</td></tr></tbody></table> <h3 id="at"><a href="#at" aria-hidden="true" class="header-anchor">#</a> At</h3> <p>At.</p> <table><thead><tr><th>字段名</th> <th>数据类型</th> <th>说明</th></tr></thead> <tbody><tr><td>display_name</td> <td>string</td> <td>有些平台允许 at 时自定义显示名</td></tr> <tr><td>uid</td> <td><a href="#uid">UID</a></td> <td>要 at 的用户 UID</td></tr></tbody></table> <h3 id="image"><a href="#image" aria-hidden="true" class="header-anchor">#</a> Image</h3> <p>图片。</p> <p>接收时可选参数不一定有，取决于平台。接收时没有 data 字段，只有 url 和
file_id 字段。接收到的 url 不一定可以直接下载，因为可能需要 token，
可以通过发送 <a href="#action">Action</a> 中的 <a href="#getfile">GetFile</a> 获取。</p> <p>发送时只需要提供 data，url，file_id 之一即可：url 为公网可访问地址。</p> <table><thead><tr><th>字段名</th> <th>数据类型</th> <th>说明</th></tr></thead> <tbody><tr><td>messenger</td> <td>string</td> <td>平台（仅用于收到的消息）</td></tr> <tr><td>format</td> <td>string</td> <td>（可选）图片格式</td></tr> <tr><td>width</td> <td>int</td> <td>（可选）图片宽度</td></tr> <tr><td>height</td> <td>int</td> <td>（可选）图片高度</td></tr> <tr><td>data</td> <td>byte[]</td> <td>图片</td></tr> <tr><td>url</td> <td>string</td> <td>图片 URL</td></tr> <tr><td>file_id</td> <td>string</td> <td>文件 ID，取决于平台</td></tr> <tr><td>file_size</td> <td>int</td> <td>（可选）文件大小</td></tr></tbody></table> <h3 id="sticker"><a href="#sticker" aria-hidden="true" class="header-anchor">#</a> Sticker</h3> <p>贴纸。接收到的消息是否拉取图片取决于插件的配置。
发送时发送（id，pack_id）和 image 任一即可。</p> <table><thead><tr><th>字段名</th> <th>数据类型</th> <th>说明</th></tr></thead> <tbody><tr><td>messenger</td> <td>string</td> <td>平台（仅用于收到的消息）</td></tr> <tr><td>id</td> <td>string</td> <td>贴纸 ID，有些平台是唯一的，有些平台取决于贴纸包 ID</td></tr> <tr><td>pack_id</td> <td>string</td> <td>贴纸包 ID，有些平台不存在</td></tr> <tr><td>image</td> <td><a href="#image">Image</a></td> <td>图片</td></tr></tbody></table> <h3 id="voice"><a href="#voice" aria-hidden="true" class="header-anchor">#</a> Voice</h3> <p>语音。</p> <p>接收时可选参数不一定有，取决于平台。接收时没有 data 字段，只有 url 和
file_id 字段。接收到的 url 不一定可以直接下载，因为可能需要 token，
可以通过发送 <a href="#action">Action</a> 中的 <a href="#getfile">GetFile</a> 获取。</p> <p>发送时只需要提供 data，url，file_id 之一即可：url 为公网可访问地址。</p> <table><thead><tr><th>字段名</th> <th>数据类型</th> <th>说明</th></tr></thead> <tbody><tr><td>messenger</td> <td>string</td> <td>平台（仅用于收到的消息）</td></tr> <tr><td>format</td> <td>string</td> <td>（可选）音频格式</td></tr> <tr><td>duration</td> <td>int</td> <td>（可选）音频时长</td></tr> <tr><td>data</td> <td>byte[]</td> <td>音频</td></tr> <tr><td>url</td> <td>string</td> <td>音频 URL</td></tr> <tr><td>file_id</td> <td>string</td> <td>文件 ID，取决于平台</td></tr> <tr><td>file_size</td> <td>int</td> <td>（可选）文件大小</td></tr></tbody></table> <h3 id="location"><a href="#location" aria-hidden="true" class="header-anchor">#</a> Location</h3> <p>位置。</p> <table><thead><tr><th>字段名</th> <th>数据类型</th> <th>说明</th></tr></thead> <tbody><tr><td>content</td> <td>string</td> <td>详细地址</td></tr> <tr><td>latitude</td> <td>float64</td> <td>纬度</td></tr> <tr><td>longitude</td> <td>float64</td> <td>经度</td></tr> <tr><td>title</td> <td>string</td> <td>标题</td></tr></tbody></table></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/projectriri/bot-gateway/edit/master/docs/Types.md" target="_blank" rel="noopener noreferrer">在 GitHub 上编辑此页</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/bot-gateway/docs/Concept.html" class="prev">
          核心概念
        </a></span> <span class="next"><a href="/bot-gateway/docs/Plugins.html">
          插件文档
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/bot-gateway/assets/js/11.e05dbfe7.js" defer></script><script src="/bot-gateway/assets/js/app.900ac474.js" defer></script>
  </body>
</html>
